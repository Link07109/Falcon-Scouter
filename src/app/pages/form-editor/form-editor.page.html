<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title text-center>Form Editor</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <!-- This shows the list of templates from Firestore -->
  <div *ngIf="!hasChosenTemplate && !useTemplate">
    <ion-card ion-item (click)="toggleChosenTemplateBool()" color="primary">
      <ion-item>
        <ion-icon name="add" item-start color="dark"></ion-icon>
        <ion-label text-center color="dark">Create Template</ion-label>
      </ion-item>
    </ion-card>

    <h2 text-center>All Templates</h2>
    <ion-item *ngFor="let template of templatesArray">
      <ion-card color="secondary">
        <ion-item>
          <ion-icon name="create" item-start color="dark"></ion-icon>
          <ion-label text-center color="dark" (click)="loadHTMLToUse(template)" [innerHTML]="template.name"></ion-label>
          <ion-button outline item-end (click)="loadHTMLToEdit(template)">Edit</ion-button>
        </ion-item>
      </ion-card>
    </ion-item>
  </div>

  <!-- These are the buttons that show up for adding components to forms -->
  <ion-fab vertical="bottom" horizontal="end" slot="fixed" *ngIf="hasChosenTemplate && !useTemplate">
    <!-- Add -->
    <ion-fab-button>
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>

    <ion-fab-list side="top">
      <!-- Selector -->
      <ion-fab-button (click)=selectorAlert() data-desc="Add item selector">
        <ion-icon name="options"></ion-icon>
      </ion-fab-button>

      <!-- Checkbox -->
      <ion-fab-button (click)="createComponent('checkbox')" data-desc="Add checkbox">
        <ion-icon name="checkbox"></ion-icon>
      </ion-fab-button>

      <!-- Toggle -->
      <ion-fab-button (click)="createComponent('toggle')" data-desc="Add toggle">
        <ion-icon name="switch"></ion-icon>
      </ion-fab-button>

      <!-- Counter -->
      <!-- <ion-fab-button (click)="createElement('<app-counter></app-counter>')"></ion-fab-button> -->
      <ion-fab-button
        (click)="createComponent('', '<ion-button color=`secondary`>-</ion-button><ion-button color=`secondary`>+</ion-button>')"
        data-desc=" Add counter">
        <ion-icon name="chatbubbles"></ion-icon>
      </ion-fab-button>

      <!-- Input -->
      <ion-fab-button (click)="createComponent('input')" data-desc="Add input">
        <ion-icon name="clipboard"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>

  <!-- Button for saving templates to Firestore -->
  <ion-fab vertical="bottom" horizontal="start" slot="fixed" *ngIf="hasChosenTemplate">
    <ion-fab-button (click)="saveTemplate()">
      <ion-icon name="save"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <!-- This is for editing a new template -->
  <ion-card>
    <ion-list>
      <ion-reorder-group (ionItemReorder)="reorderItems($event)" [disabled]="false" id="divID" *ngIf="hasChosenTemplate">
      </ion-reorder-group>
    </ion-list>
  </ion-card>

  <!-- This is for editing existing templates -->
  <ion-card>
    <ion-list>
      <!-- The difference between this and the one above is that this one doesnt have the divID -->
      <ion-reorder-group (ionItemReorder)="reorderItems($event)" [disabled]="false" *ngIf="hasChosenTemplate" [innerHTML]="templateHTML">
      </ion-reorder-group>
    </ion-list>
  </ion-card>

  <!-- This is for using existing templates -->
  <ion-card *ngIf="useTemplate">
    <ion-card-content [innerHTML]="templateHTML"></ion-card-content>
    <div text-center>
      <ion-button (click)="submitData">Submit</ion-button>
    </div>
  </ion-card>

</ion-content>